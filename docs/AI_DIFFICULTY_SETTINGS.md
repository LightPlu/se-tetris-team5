# AI 난이도 설정 가이드

## 개요

Player vs AI 대전 모드에서 AI의 난이도를 선택할 수 있습니다. 현재 **보통(NORMAL)**과 **어려움(HARD)** 두 가지 난이도가 제공됩니다.

## 난이도별 설정

### 🟡 보통 (NORMAL)

**목표**: 초보자도 즐길 수 있는 수준의 AI

**설정값**:
- **가중치**: 기본 가중치 100% 사용 (최적화된 가중치)
  - 유전 알고리즘으로 학습된 최적 가중치를 그대로 사용
  - 예: Landing Height 가중치 -3.91, EPCM 가중치 7.86 등
- **AI 행동 주기**: 200ms (고정)
  - AI가 200ms마다 한 번씩 행동을 결정합니다
- **AI 사고 시간**: 500ms
  - AI가 다음 행동을 결정하기 전에 500ms 동안 사고합니다

**특징**:
- 적당한 반응 속도
- 최적화된 판단력
- 초보자도 즐길 수 있는 수준

### 🔴 어려움 (HARD)

**목표**: 숙련된 플레이어에게 도전적인 수준의 AI

**설정값**:
- **가중치**: 기본 가중치 100% 사용 (최적화된 가중치)
  - 유전 알고리즘으로 학습된 최적 가중치를 그대로 사용
  - 예: Landing Height 가중치 -3.91, EPCM 가중치 7.86 등
- **AI 행동 주기**: 200ms (고정)
  - AI가 200ms마다 한 번씩 행동을 결정합니다
- **AI 사고 시간**: 200ms
  - AI가 다음 행동을 결정하기 전에 200ms 동안 사고합니다 (더 빠름)

**특징**:
- 빠른 사고 속도로 인한 빠른 반응
- 최적화된 판단으로 인한 높은 정확도
- 숙련된 플레이어에게도 도전적인 수준

## 난이도 조절 방법

현재 난이도는 **AI 사고 시간**으로만 조절됩니다. 가중치와 행동 주기는 모든 난이도에서 동일하게 사용됩니다.

### AI 사고 시간 조절

AI가 다음 행동을 결정하기 전에 생각하는 시간을 제어합니다.

```java
// 보통: 500ms 사고
thinkDelayMs = 500

// 어려움: 200ms 사고 (더 빠름)
thinkDelayMs = 200
```

**영향**:
- 더 짧은 사고 시간은 AI가 더 빠르게 행동할 수 있게 합니다
- 어려움 난이도에서는 AI가 더 빠르게 반응하여 플레이어에게 더 큰 도전을 제공합니다
- 가중치는 항상 최적화된 값을 사용하므로 AI의 판단 품질은 동일합니다

### 가중치 (모든 난이도 동일)

모든 난이도에서 유전 알고리즘으로 학습된 최적 가중치를 그대로 사용합니다.

- **Landing Height**: -3.91
- **EPCM**: 7.86
- **Row Transitions**: -3.23
- **Column Transitions**: -15.30
- **Holes**: -12.80
- **Well Sums**: -10.36
- **Attack 2 Lines**: 20.02
- **Attack 3 Lines**: 32.39
- **Attack 4 Lines**: 42.47

### AI 행동 주기 (모든 난이도 동일)

모든 난이도에서 200ms로 고정됩니다.

## 구현 세부사항

### 코드 위치

1. **메뉴 선택**: `app/src/main/java/se/tetris/team5/screens/home.java`
   - AI 대전 모드 선택 시 난이도 선택 화면으로 이동
   - 보통/어려움 선택 후 게임 시작

2. **난이도 설정**: `app/src/main/java/se/tetris/team5/gamelogic/ai/AIPlayerController.java`
   - `setDifficulty()` 메서드로 난이도 설정
   - 행동 주기 조절

3. **가중치 적용**: `app/src/main/java/se/tetris/team5/gamelogic/ai/TetrisAI.java`
   - `setDifficulty()` 메서드로 난이도 설정
   - 가중치 및 사고 시간 조절

4. **게임 시작**: `app/src/main/java/se/tetris/team5/screens/battle.java`
   - 시스템 속성에서 AI 난이도 읽기
   - AI 컨트롤러에 난이도 적용

## 향후 개선 방향

### 추가 난이도 옵션

1. **쉬움 (EASY)**
   - 가중치: 기본 가중치의 60%
   - 행동 주기: 350ms
   - 사고 시간: 900ms

2. **매우 어려움 (VERY_HARD)**
   - 가중치: 기본 가중치의 120% (더 공격적)
   - 행동 주기: 100ms
   - 사고 시간: 400ms

### 동적 난이도 조절

- 플레이어의 승률에 따라 난이도를 자동으로 조절
- 게임 중간에 난이도를 변경할 수 있는 옵션

### 추가 조절 요소

1. **Beam Search 깊이**
   - 쉬움: BEAM_WIDTH = 2
   - 어려움: BEAM_WIDTH = 4

2. **랜덤성 추가**
   - 쉬움: 가끔 랜덤한 행동 (10% 확률)
   - 어려움: 항상 최적 행동

3. **예측 깊이**
   - 쉬움: 1-Piece Lookahead
   - 어려움: 3-Piece Lookahead

## 테스트 방법

1. **보통 난이도 테스트**
   - AI 대전 모드 선택 → 보통 선택
   - AI의 반응 속도와 판단력 확인
   - 승리 가능성 확인

2. **어려움 난이도 테스트**
   - AI 대전 모드 선택 → 어려움 선택
   - AI의 빠른 반응과 정확한 판단 확인
   - 도전적인 난이도 확인

3. **난이도 차이 확인**
   - 같은 상황에서 두 난이도의 AI 행동 비교
   - 승률 및 평균 점수 비교

## 참고

- 기본 가중치는 `WeightSet.java`의 기본 생성자에서 정의됩니다
- 가중치는 유전 알고리즘으로 학습된 최적값입니다
- 난이도 조절은 게임 플레이 경험을 개선하기 위한 기능입니다

